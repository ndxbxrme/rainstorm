{
  "version": 3,
  "file": "index.js",
  "sourceRoot": "../src/",
  "sources": [
    "index.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\r\nexpress = require 'express'\r\nhttp = require 'http'\r\nglob = require 'glob'\r\npath = require 'path'\r\nogid = require 'ogid'\r\nconsole.log ogid()\r\n\r\napp = express()\r\napps = {}\r\nbase = path.join process.cwd(), 'build'\r\nmodule.exports = \r\n  apps: apps\r\n  app: (config) ->\r\n    config = config or {}\r\n    config.root = config.root or ''\r\n    console.log 'configgin', config\r\n    proxyFn = (method) ->\r\n      ->\r\n        url = config.root + arguments[0]\r\n        console.log 'configuring route', url\r\n        arguments[0] = url\r\n        app[method].apply app, arguments\r\n        @\r\n    rainstorm = \r\n      static: express.static\r\n      database: (config.dbEngine or {}) config\r\n      root: config.root\r\n      config: config\r\n      base: base\r\n      service: (fn) ->\r\n        fn rainstorm\r\n        @\r\n    rainstorm.db = rainstorm.database\r\n    rainstorm[method] = proxyFn method for method in ['all', 'use', 'get', 'post', 'put', 'delete']\r\n    #for folder in ['services', 'controllers']\r\n    #  modules = glob.sync path.join base, \"#{folder}/**/*.js\" \r\n    #  for module in modules\r\n    #    require(module) rainstorm\r\n    subapps = glob.sync path.join base, '../apps/*/server/app.js'\r\n    if not config.root\r\n      app.get '*', (req, res, next) ->\r\n        fullurl = req.hostname + req.url\r\n        rs = null\r\n        for key, subapp of apps\r\n          if fullurl.indexOf(key) is 0\r\n            req.url = key + fullurl.replace(key, '')\r\n            req.rs = subapp\r\n            break\r\n        console.log req.url\r\n        next('route')\r\n      for subapp in subapps\r\n        base = path.dirname(subapp)\r\n        require subapp\r\n      server = http.createServer app\r\n      server.listen 3000, ->\r\n        console.log 'started'\r\n    else\r\n      console.log 'loaded', config.root\r\n      @apps[config.root] = rainstorm\r\n    rainstorm"
  ]
}